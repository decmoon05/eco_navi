# 🌿 EcoNaviAR 프로젝트 현황 보고서 (모바일 앱 개발 진행 중)

**[본 문서는 웹 프로토타입을 기반으로 진행 중인 React Native 모바일 앱 개발 현황을 기록한 문서입니다.]**

## 1. 프로젝트 개요

'EcoNaviAR'은 사용자가 친환경적인 이동 수단을 선택하도록 장려하고, 이동 시 발생하는 탄소 배출량을 정밀하게 계산하여 시각화해주는 **모바일 내비게이션 애플리케이션**입니다.

## 2. 개발 진행 상황 (Mobile App)

### ✅ 구현 완료된 핵심 기능

#### A. 경로 검색 및 지도
*   **Tmap API 연동:** 자동차, 도보 경로 탐색 기능 구현 완료.
*   **ODsay API 연동:** 대중교통(버스, 지하철) 상세 경로 및 환승 정보 구현 완료.
*   **지도 시각화:**
    *   `react-native-maps`를 활용한 지도 표시.
    *   대중교통 노선별 색상(지하철 호선색, 버스 유형색) 적용.
    *   도보 구간 점선 표시 및 화살표 마커 스타일 개선.
    *   출발지/도착지 설정 시 지도 자동 줌인/이동 기능.
*   **검색 UI 개선:**
    *   전체 화면 모달을 통한 쾌적한 장소 검색.
    *   검색 결과에 상세 주소 표시.
    *   직관적인 버튼형 교통수단 선택 UI.

#### B. 탄소 배출량 정밀 계산
*   **차량 세분화:** 일반 내연차, 전기차, 하이브리드, 수소차, 오토바이, 전기 오토바이 등 다양한 차종 지원.
*   **상세 로직:**
    *   **차량:** 속도별 배출 계수 보정 (고속 주행 연비 반영).
    *   **대중교통:** 시간/요일별 혼잡도(탑승 인원 추정)를 반영하여 1인당 실질 배출량 계산.
*   **비교 분석:**
    *   '내 차량' vs '대중교통' vs '친환경(도보/자전거)' 배출량 비교 차트 제공.
    *   어떤 경로로 검색하든 항상 '내 차량' 및 '대중교통' 기준 데이터를 백그라운드에서 확보하여 정확한 비교 제공.

#### C. 사용자 맞춤 및 편의 기능
*   **마이페이지:** 내 차량 종류 설정 기능 (서버 연동).
*   **자전거 편의:** 자전거 모드 선택 시 주변 공유 자전거 대여소(Mock Data) 표시.
*   **상세 경로 안내:** 환승 여부('환승 이동'), 탑승 노선 등 구체적인 이동 정보 리스트 제공.

### 🛠️ 진행 중 / 예정된 작업

1.  **공공데이터 연동 고도화:**
    *   실시간 버스/지하철 도착 정보 연동 (현재 준비 중).
    *   실제 공유 자전거/킥보드 API 연동.
2.  **AR 기능 구현:**
    *   카메라를 통한 AR 길안내 및 탄소 발자국 시각화.
3.  **안정화 및 최적화:**
    *   API 호출 실패 시 폴백(Fallback) 로직 안정화.
    *   앱 성능 최적화.

## 3. 기술 스택

*   **Framework:** React Native (CLI)
*   **Language:** TypeScript
*   **Navigation:** React Navigation (Stack, Bottom Tabs)
*   **Map:** react-native-maps (Google Maps Provider)
*   **State Management:** Context API (AuthContext)
*   **API:** Tmap API, ODsay API
*   **Backend:** Node.js, Express, SQLite (기존 웹 프로토타입 서버 재사용 및 확장)

## 4. 최근 주요 변경 사항 (Changelog)

*   **feat:** ODsay API 연동으로 대중교통 상세 경로(Polyline) 및 색상 표시 구현.
*   **feat:** 탄소 배출량 계산 로직 대폭 개선 (차종 추가, 혼잡도/속도 반영, 1인당 배출량 기준).
*   **ui:** 경로 검색 및 결과 화면 UI/UX 전면 개편 (모달 검색, 지도 인터랙션, 비교 차트 등).
*   **fix:** 대중교통 API 권한 오류(403) 시 자동차 경로 폴백 로직 추가.
*   **fix:** `VirtualizedList` 중첩 경고 등 주요 React Native 경고 해결.
