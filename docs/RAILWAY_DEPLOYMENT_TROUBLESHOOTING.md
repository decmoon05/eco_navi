# ğŸ› Railway ë°°í¬ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

Railwayì—ì„œ "Application failed to respond" ì˜¤ë¥˜ê°€ ë°œìƒí•  ë•Œ í•´ê²° ë°©ë²•ì…ë‹ˆë‹¤.

## ğŸ” ë¬¸ì œ ì§„ë‹¨

### 1. ë°°í¬ ë¡œê·¸ í™•ì¸

Railway ëŒ€ì‹œë³´ë“œì—ì„œ:
1. **Deployments** íƒ­ í´ë¦­
2. ì‹¤íŒ¨í•œ ë°°í¬ í´ë¦­
3. **"Deploy Logs"** ë˜ëŠ” **"Build Logs"** í™•ì¸

### 2. ì¼ë°˜ì ì¸ ì˜¤ë¥˜ ì›ì¸

#### A. ì„œë²„ê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ:**
- ë°°í¬ëŠ” ì„±ê³µí–ˆì§€ë§Œ ìš”ì²­ì— ì‘ë‹µí•˜ì§€ ì•ŠìŒ
- Health check ì‹¤íŒ¨

**í™•ì¸ ì‚¬í•­:**
1. **Start Command í™•ì¸:**
   - Settings â†’ Deploy â†’ Start Command
   - `npm start` ë˜ëŠ” `node index.js` í™•ì¸

2. **í¬íŠ¸ í™•ì¸:**
   - ì„œë²„ê°€ `process.env.PORT`ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸
   - RailwayëŠ” ìë™ìœ¼ë¡œ `PORT` í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•¨

3. **ì„œë²„ ì½”ë“œ í™•ì¸:**
   ```javascript
   // server/index.js ë§ˆì§€ë§‰ ë¶€ë¶„
   app.listen(port, '0.0.0.0', () => {
     console.log(`ì„œë²„ê°€ ${port} í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.`);
   });
   ```

#### B. í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½

**ì¦ìƒ:**
- ì„œë²„ê°€ ì‹œì‘ë˜ë‹¤ê°€ í¬ë˜ì‹œ
- JWT_SECRET ê´€ë ¨ ì˜¤ë¥˜

**í•´ê²°:**
1. Variables íƒ­ì—ì„œ í™•ì¸:
   - `JWT_SECRET` ì„¤ì •ë¨
   - `NODE_ENV=production` ì„¤ì •ë¨

2. ë¡œê·¸ì—ì„œ í™•ì¸:
   ```
   ì„œë²„ ì„¤ì • ì˜¤ë¥˜: JWT ë¹„ë°€ í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.
   ```

#### C. ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ ë¬¸ì œ

**ì¦ìƒ:**
- ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
- ê¶Œí•œ ì˜¤ë¥˜

**í•´ê²°:**
- RailwayëŠ” ìë™ìœ¼ë¡œ ì˜êµ¬ ì €ì¥ì†Œë¥¼ ì œê³µí•˜ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ë¬¸ì œ ì—†ìŒ
- ë§Œì•½ ë¬¸ì œê°€ ìˆë‹¤ë©´ `DATABASE_PATH` í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### D. ì˜ì¡´ì„± ì„¤ì¹˜ ì‹¤íŒ¨

**ì¦ìƒ:**
- Build Logsì— npm install ì˜¤ë¥˜
- íŒ¨í‚¤ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**í•´ê²°:**
1. `server/package.json` í™•ì¸
2. Node.js ë²„ì „ í™•ì¸ (engines í•„ë“œ)

## ğŸ”§ í•´ê²° ë°©ë²•

### ë°©ë²• 1: ë°°í¬ ë¡œê·¸ í™•ì¸

1. Railway ëŒ€ì‹œë³´ë“œ â†’ Deployments
2. ìµœì‹  ë°°í¬ í´ë¦­
3. "Deploy Logs" í™•ì¸
4. ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

**ì¼ë°˜ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€:**
- `Error: Cannot find module 'xxx'` â†’ ì˜ì¡´ì„± ë¬¸ì œ
- `EADDRINUSE` â†’ í¬íŠ¸ ì¶©ëŒ (Railwayê°€ ìë™ ì²˜ë¦¬)
- `JWT_SECRET` ê´€ë ¨ â†’ í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½
- `database.db` ê´€ë ¨ â†’ ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ ë¬¸ì œ

### ë°©ë²• 2: í™˜ê²½ ë³€ìˆ˜ í™•ì¸

**í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜:**
```
JWT_SECRET=your-random-secret-key
NODE_ENV=production
```

**í™•ì¸ ë°©ë²•:**
1. Variables íƒ­ìœ¼ë¡œ ì´ë™
2. ëª¨ë“  ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
3. ê°’ì— ê³µë°±ì´ë‚˜ íŠ¹ìˆ˜ë¬¸ìê°€ ì—†ëŠ”ì§€ í™•ì¸

### ë°©ë²• 3: ì„œë²„ ì½”ë“œ í™•ì¸

**server/index.js ë§ˆì§€ë§‰ ë¶€ë¶„:**
```javascript
// ì˜¬ë°”ë¥¸ í˜•íƒœ
app.listen(port, '0.0.0.0', () => {
  console.log(`ë°±ì—”ë“œ ì„œë²„ê°€ http://0.0.0.0:${port} ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.`);
});
```

**ì˜ëª»ëœ í˜•íƒœ:**
```javascript
// âŒ localhostë§Œ ë¦¬ìŠ¤ë‹ (Railwayì—ì„œ ì™¸ë¶€ ì ‘ê·¼ ë¶ˆê°€)
app.listen(port, 'localhost', () => {
  // ...
});

// âŒ í¬íŠ¸ í•˜ë“œì½”ë”© (Railwayì˜ PORT í™˜ê²½ ë³€ìˆ˜ ë¬´ì‹œ)
app.listen(3001, '0.0.0.0', () => {
  // ...
});
```

### ë°©ë²• 4: Health Check ì—”ë“œí¬ì¸íŠ¸ í™•ì¸

ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆëŠ”ì§€ í™•ì¸:

```javascript
// server/index.jsì— ì´ë¯¸ ìˆìŒ
app.get('/health', (req, res) => {
  res.status(200).json({ 
    status: 'ok', 
    message: 'ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.',
    timestamp: new Date().toISOString()
  });
});
```

**í…ŒìŠ¤íŠ¸:**
```
https://your-service.up.railway.app/health
```

### ë°©ë²• 5: ì¬ë°°í¬

1. Settings â†’ Source
2. "Redeploy" ë²„íŠ¼ í´ë¦­
3. ë˜ëŠ” ì½”ë“œë¥¼ ì•½ê°„ ìˆ˜ì •í•˜ê³  ì»¤ë°‹í•˜ì—¬ ìë™ ì¬ë°°í¬

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë°°í¬ ì „ í™•ì¸:

- [ ] `server/package.json`ì— `engines` í•„ë“œ ìˆìŒ
- [ ] `server/index.js`ê°€ `process.env.PORT` ì‚¬ìš©
- [ ] `app.listen(port, '0.0.0.0', ...)` í˜•íƒœ
- [ ] `/health` ì—”ë“œí¬ì¸íŠ¸ ìˆìŒ
- [ ] `JWT_SECRET` í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ë¨
- [ ] `NODE_ENV=production` ì„¤ì •ë¨
- [ ] Root Directoryê°€ `server`ë¡œ ì„¤ì •ë¨

## ğŸ” ë””ë²„ê¹… íŒ

### ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸

Railwayì™€ ë™ì¼í•œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸:

```bash
cd server
PORT=3001 NODE_ENV=production JWT_SECRET=test-secret node index.js
```

### ë¡œê·¸ í™•ì¸

Railway ëŒ€ì‹œë³´ë“œì—ì„œ:
1. **Logs** íƒ­ í´ë¦­
2. ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
3. ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

### Health Check

ë°°í¬ í›„ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸:
```bash
curl https://your-service.up.railway.app/health
```

## ğŸš¨ ì¼ë°˜ì ì¸ ì˜¤ë¥˜ì™€ í•´ê²°

### ì˜¤ë¥˜ 1: "Cannot find module"

**ì›ì¸:** ì˜ì¡´ì„±ì´ ì„¤ì¹˜ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
- `server/package.json` í™•ì¸
- `npm install`ì´ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸ (Railwayê°€ ìë™ ì‹¤í–‰)

### ì˜¤ë¥˜ 2: "Port already in use"

**ì›ì¸:** í¬íŠ¸ ì¶©ëŒ (Railwayì—ì„œ ìë™ ì²˜ë¦¬ë˜ë¯€ë¡œ ë“œë­„)

**í•´ê²°:**
- `process.env.PORT` ì‚¬ìš© í™•ì¸
- Railwayê°€ ìë™ìœ¼ë¡œ í¬íŠ¸ í• ë‹¹

### ì˜¤ë¥˜ 3: "JWT_SECRET is not defined"

**ì›ì¸:** í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½

**í•´ê²°:**
- Variables íƒ­ì—ì„œ `JWT_SECRET` ì¶”ê°€
- ì¬ë°°í¬

### ì˜¤ë¥˜ 4: "Database file not found"

**ì›ì¸:** ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ ë¬¸ì œ

**í•´ê²°:**
- RailwayëŠ” ìë™ìœ¼ë¡œ ì˜êµ¬ ì €ì¥ì†Œ ì œê³µ
- `DATABASE_PATH` í™˜ê²½ ë³€ìˆ˜ í™•ì¸ (í•„ìš” ì‹œ)

## ğŸ“ ì¶”ê°€ ë„ì›€

1. **Railway ë¡œê·¸ í™•ì¸:**
   - Deployments â†’ ìµœì‹  ë°°í¬ â†’ Deploy Logs
   - ì—ëŸ¬ ë©”ì‹œì§€ ì „ì²´ ë³µì‚¬

2. **ë¡œì»¬ í…ŒìŠ¤íŠ¸:**
   - ë™ì¼í•œ í™˜ê²½ ë³€ìˆ˜ë¡œ ë¡œì»¬ì—ì„œ ì‹¤í–‰
   - ë¬¸ì œ ì¬í˜„ ì—¬ë¶€ í™•ì¸

3. **Railway ë¬¸ì„œ:**
   - [Railway Troubleshooting](https://docs.railway.app/help/troubleshooting)

---

**ì¶”ê°€ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”!** ğŸ›

